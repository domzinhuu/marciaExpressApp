<!--
  Generated template for the HistoryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Histórico</ion-title>
    
    <ion-buttons right>
      <button ion-button clear>{{actualYear}}</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content>
  <ion-card>
    <ion-card-content text-center class="card-body">
      <p *ngIf="history.length">Essas foram as suas compras este ano. Estão todas agrupadas pela data de compra.</p>
      <p *ngIf="!history.length">Você não fez nenhuma compra esse ano nos cartões de Marcia!</p>
    </ion-card-content>
  </ion-card>
  <ion-card>

    <ion-item-group>
      <ng-container *ngFor="let item of history">
        <ion-item-divider color="secondary">{{item[0].buyAtMonth}} / Lojas</ion-item-divider>
        <ng-container *ngFor="let compra of item">
            <ion-list>
                <ion-item>
                  <ion-thumbnail item-start>
                      <p class="thumb-label">Dia</p>
                      <p class="thumb"> {{compra.buyAt | date:'dd'}}</p>
                  </ion-thumbnail>
                  <h2>{{compra.product}}</h2>
                  <p>{{compra.local}}</p>
                  <button class="text-normal" ion-button clear item-end>{{compra.value/100 | currency:'BRL':true}}</button>
                </ion-item>
              </ion-list>
        </ng-container>

      </ng-container>
    </ion-item-group>
  </ion-card>
</ion-content>